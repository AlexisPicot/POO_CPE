<!DOCTYPE html><html><head>
      <title>TP 3</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<p>Dans ce TP, nous allons passer à l’interface graphique. Nous allons utiliser Java Swing pour cela.<br>
Je vous conseille d’installer un IDE comme IntelliJ pour cette étape.</p>
<blockquote>
<p>L’objectif n’est pas de vous apprendre à utiliser Java Swing, c’est une technologie qui est en fin de vie, pénible à utiliser ; justement, ce sera l’occasion de vous présenter des concepts poussés afin de vous montrer comment on peut les utiliser pour simplifier la vie du développeur.</p>
</blockquote>
<p>Pour gérer l’interface graphique, nous allons utiliser le patron de conception “Modèle-Vue-Contrôleur” (MVC). C’est un patron de conception qui permet de séparer les données de l’interface graphique et de la logique métier. Cela permet de rendre le code plus modulaire et de faciliter les tests unitaires.</p>
<p>Le projet initialisé est disponible <a href="https://github.com/AlexisPicot/TP.ICS">ici</a></p>
<blockquote>
<p>Le projet ne comporte pas tout ce que vous avez fait jusqu’à présent. Vous devrez donc ajouter les classes que vous avez créées dans ce projet.</p>
</blockquote>
<p>En outre, le projet comporte des notions que vous n’avez pas encore vues. Vous devrez donc vous renseigner sur ces notions pour comprendre le code.</p>
<p>Par exemple, nous utilisons de l’injection de dépendance pour instancier les classes. Vous devrez donc comprendre ce que c’est et comment cela fonctionne.</p>
<p>Dans les grandes lignes, l’injection de dépendance consiste à passer les dépendances d’une classe en paramètre de son constructeur. Cela permet de rendre les classes plus modulaires et de faciliter les tests unitaires.</p>
<p>Nous allons également utiliser des annotations pour déclarer les classes comme des composants Spring. Vous devrez donc comprendre ce que sont les annotations et comment elles fonctionnent.<br>
Enfin, nous allons nous servir de l’interface Observer/Observable pour notifier les observateurs lorsqu’un événement se produit. Vous devrez donc comprendre ce que sont les observateurs et comment ils fonctionnent.</p>
<p>Toutes ces notions sont plus ou moins des “Design Patterns” qui sont des solutions à des problèmes récurrents en programmation.</p>
<p>L’idée, vous allez le voir c’est que si votre application doit afficher une liste de messages dans la fenêtre principale, par exemple pour savoir combien d’expérience vous avez gagné lors de votre précédent combat, ou alors comprendre pourquoi vous avez perdu et améliorer votre stratégie, vous n’allez pas conserver une référence vers la variable “Texte à afficher”, nous allons crée un service “MessageService” qui va s’occuper de gérer les messages. Ainsi, si nous voulons changer la manière dont les messages sont affichés, nous n’aurons pas à modifier toutes les classes qui affichent des messages, mais seulement le service “MessageService”.<br>
Grâce à l’injection de dépendance, partout ou vous voudrez afficher un message, vous pourrez simplement ajouter un paramètre “MessageService” à votre constructeur et le tour est joué.</p>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">MessageService</span> <span class="token keyword keyword-extends">extends</span> <span class="token class-name">Observable</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> messages <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Ajouter un message à la liste et notifier les observateurs</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">addMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        messages<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">notifyObservers</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Obtenir la liste des messages</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getMessages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span> messages<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>Ici, nous avons crée un service “MessageService” qui va s’occuper de gérer les messages. Nous avons également utilisé l’interface “Observable” pour notifier les observateurs lorsqu’un message est ajouté à la liste.</p>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code>  <span class="token keyword keyword-public">public</span> <span class="token class-name">RandomMessageGenerator</span><span class="token punctuation">(</span><span class="token class-name">MessageService</span> messageService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>messageService <span class="token operator">=</span> messageService<span class="token punctuation">;</span>
        messageService<span class="token punctuation">.</span><span class="token function">addMessage</span><span class="token punctuation">(</span><span class="token string">"Salut"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><p>Ici, nous avons utilisé l’injection de dépendance pour passer le service “MessageService” en paramètre du constructeur.<br>
Notez que nous avons également ajouté un message à la liste.</p>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Events</span> <span class="token keyword keyword-extends">extends</span> <span class="token class-name">JTextPane</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-final">final</span> <span class="token class-name">MessageService</span> messageService<span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token class-name">Events</span><span class="token punctuation">(</span><span class="token class-name">MessageService</span> messageService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>messageService <span class="token operator">=</span> messageService<span class="token punctuation">;</span>
        <span class="token function">setEditable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Empêcher l'édition du texte</span>
        <span class="token function">setPreferredSize</span><span class="token punctuation">(</span><span class="token keyword keyword-new">new</span> <span class="token class-name">Dimension</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Taille par défaut</span>
        <span class="token function">setBorder</span><span class="token punctuation">(</span><span class="token class-name">BorderFactory</span><span class="token punctuation">.</span><span class="token function">createLineBorder</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Bordure</span>

        messageService<span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> arg<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>arg <span class="token keyword keyword-instanceof">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> arg<span class="token punctuation">;</span>
                <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token keyword keyword-this">this</span><span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> message <span class="token operator">+</span> <span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>Dans notre classe “Events”, qui est une classe “graphique” nous avons utilisé l’injection de dépendance pour passer le service “MessageService” en paramètre du constructeur.<br>
Comme nous avons utilisé l’interface “Observable” dans le service “MessageService”, nous pouvons ajouter un observateur à ce service pour être notifié lorsqu’un message est ajouté à la liste.</p>
<p>A aucun moment nous n’avons utilisé “new” pour instancier une classe. Nous avons toujours passé les dépendances en paramètre du constructeur. Si demain mon service “MessageService” a besoin d’une autre dépendance, je n’aurais qu’à ajouter cette dépendance en paramètre du constructeur, les autres classes qui utilisent ce service n’auront pas à être modifiées.</p>
<h3 id="etape-10–rappatrier-votre-code-dans-le-projet">Etape 10 : Rappatrier votre code dans le projet </h3>
<p>Pour cette étape, vous pouvez soit créer un projet vous même si vous vous sentez à l’aise, soit cloner le projet, et copier/coller vos classes dans le projet.</p>
<p>Actuellement, l’application permet les choses suivantes :</p>
<ul>
<li>Afficher une carte du monde générée de manière procédurale
<ul>
<li>Afficher un personnage sur la carte</li>
<li>Vous pouvez vous déplacer sur la carte, par contre vous ne pouvez pas encore interagir avec les éléments de la carte</li>
<li>Votre personnage peut aussi aller dans l’eau, ce qui n’est pas très réaliste</li>
</ul>
</li>
<li>Il y a une interface très moche qui permet de répartir ses points S.P.E.C.I.A.L. (Force, Perception, Endurance, Charisme, Intelligence, Agilité, Chance)</li>
</ul>
<h3 id="etape-11–crée-un-nouvel-écran-pour-afficher-linventaire">Etape 11 : Crée un nouvel écran pour afficher l’inventaire </h3>
<p>En observant le code, vous avez remarqué que si une classe possède l’annotation</p>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code><span class="token annotation punctuation">@IGameMainMenu</span><span class="token punctuation">(</span><span class="token string">"Exploration"</span><span class="token punctuation">)</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">ExplorationPane</span> <span class="token keyword keyword-extends">extends</span> <span class="token class-name">JPanel</span> <span class="token keyword keyword-implements">implements</span> <span class="token class-name">IOnShown</span> <span class="token punctuation">{</span>
</code></pre><p>Elle sera ajoutée à l’interface graphique. Vous pouvez donc créer une nouvelle classe qui hérite de JPanel et qui possède cette annotation pour ajouter un nouvel écran à l’interface graphique.</p>
<p>L’interface <code>IOnShown</code> est une interface qui permet de notifier une classe lorsqu’elle est affichée. Vous pouvez donc implémenter cette interface pour effectuer des actions lorsqu’un écran est affiché. Vous n’êtes pas obligé de l’implémenter si vous n’en avez pas besoin.</p>
<blockquote>
<p>Comment le programme fait-il pour comprendre que c’est un nouvel écran ? Il utilise la réflexion. La réflexion est une fonctionnalité de Java qui permet de manipuler les classes à l’exécution. Vous pouvez par exemple obtenir la liste des classes qui possèdent une annotation, ou bien obtenir la liste des méthodes d’une classe. C’est grâce à la réflexion que le programme peut ajouter les écrans à l’interface graphique.</p>
</blockquote>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> beansWithAnnotation <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBeansWithAnnotation</span><span class="token punctuation">(</span><span class="token class-name">IGameMainMenu</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        beansWithAnnotation<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> o<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>

            jTabbedPane<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span></span>Component</span><span class="token punctuation">)</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jTabbedPane<span class="token punctuation">.</span><span class="token function">addChangeListener</span><span class="token punctuation">(</span><span class="token keyword keyword-new">new</span> <span class="token class-name">ChangeListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">stateChanged</span><span class="token punctuation">(</span><span class="token class-name">ChangeEvent</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>jTabbedPane<span class="token punctuation">.</span><span class="token function">getSelectedComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-instanceof">instanceof</span> <span class="token class-name">IOnShown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">IOnShown</span><span class="token punctuation">)</span> jTabbedPane<span class="token punctuation">.</span><span class="token function">getSelectedComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onShown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Dans votre nouvel écran, vous pouvez afficher l’inventaire du personnage. Choisissez une manière de représenter l’inventaire, par exemple une liste d’objets, ou bien une grille d’objets.<br>
Une fois l’objet choisi, vous pourriez, à la manière de l’écran de répartition des points S.P.E.C.I.A.L., accéder à votre personnage pour lui ajouter des objets.<br>
Toutefois, comme nous voulons faire du MVC, vous devriez créer un contrôleur pour gérer la sélection des objets.</p>
<p>Pour cela créez une nouvelle classe <code>InventoryController</code> qui va gérer la sélection des objets.<br>
Votre classe peut ressembler à ceci :</p>
<p class="plantuml"><!--?xml version="1.0" encoding="us-ascii" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="157px" preserveAspectRatio="none" style="width:377px;height:157px;background:#FFFFFF;" version="1.1" viewBox="0 0 377 157" width="377px" zoomAndPan="magnify"><defs></defs><g><!--class InventoryController--><g id="elem_InventoryController"><rect codeline="1" fill="#F1F1F1" height="136.0469" id="InventoryController" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="356" x="7" y="7"></rect><ellipse cx="120.75" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"></ellipse><path d="M123.5156,18.875 Q123.6719,18.6563 123.8594,18.5469 Q124.0469,18.4375 124.2656,18.4375 Q124.6406,18.4375 124.875,18.7031 Q125.1094,18.9531 125.1094,19.5625 L125.1094,21.0156 Q125.1094,21.625 124.875,21.8906 Q124.6406,22.1563 124.2656,22.1563 Q123.9219,22.1563 123.7188,21.9531 Q123.5156,21.7656 123.4063,21.25 Q123.3594,20.8906 123.1719,20.7031 Q122.8438,20.3281 122.2344,20.1094 Q121.625,19.8906 121,19.8906 Q120.2344,19.8906 119.5938,20.2188 Q118.9688,20.5469 118.4688,21.2969 Q117.9844,22.0469 117.9844,23.0781 L117.9844,24.1719 Q117.9844,25.4063 118.875,26.2344 Q119.7656,27.0469 121.3594,27.0469 Q122.2969,27.0469 122.9531,26.7969 Q123.3438,26.6406 123.7656,26.2031 Q124.0313,25.9375 124.1719,25.8594 Q124.3281,25.7813 124.5313,25.7813 Q124.8594,25.7813 125.1094,26.0469 Q125.375,26.2969 125.375,26.6406 Q125.375,26.9844 125.0313,27.3906 Q124.5313,27.9688 123.7344,28.2969 Q122.6563,28.75 121.3594,28.75 Q119.8438,28.75 118.6406,28.125 Q117.6563,27.625 116.9688,26.5625 Q116.2813,25.4844 116.2813,24.2031 L116.2813,23.0469 Q116.2813,21.7188 116.8906,20.5781 Q117.5156,19.4219 118.6094,18.8125 Q119.7031,18.1875 120.9375,18.1875 Q121.6719,18.1875 122.3125,18.3594 Q122.9688,18.5156 123.5156,18.875 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="141.25" y="28.7285">InventoryController</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="362" y1="39" y2="39"></line><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="50.3047"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="27" y="57.5332">Personnage character</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="362" y1="64.6094" y2="64.6094"></line><ellipse cx="18" cy="78.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="330" x="27" y="83.1426">InventoryController(PersonnageSingleton character)</text><ellipse cx="18" cy="96.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="184" x="27" y="100.752">void onItemClicked(Item item)</text><ellipse cx="18" cy="114.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="209" x="27" y="118.3613">IEnumerable&lt;Armes&gt; getArmes()</text><ellipse cx="18" cy="131.7422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="235" x="27" y="135.9707">IEnumerable&lt;Armures&gt; getArmures()</text></g><!--SRC=[TOj12i9034NtFKMM5V468aXnCJl14upJC0vc4iYaXIBUtRPKPgDPX0V_lK2-570y8fler0cR2X4gl1gOxm1Nr2BCFYA4XrSV37MTzh-ojkgtn97GX6ktsy9HKW_2pZ1tbC8J-tPXIFFxEkx2GqRrTyBZMJEM4qIqbTe_pg3LMdZpclS7]--></g></svg></p><p>Et votre écran pourrait ressembler à ceci :</p>
<p class="plantuml"><!--?xml version="1.0" encoding="us-ascii" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="121px" preserveAspectRatio="none" style="width:331px;height:121px;background:#FFFFFF;" version="1.1" viewBox="0 0 331 121" width="331px" zoomAndPan="magnify"><defs></defs><g><!--class InventoryPane--><g id="elem_InventoryPane"><rect codeline="1" fill="#F1F1F1" height="100.8281" id="InventoryPane" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="310" x="7" y="7"></rect><ellipse cx="112.25" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"></ellipse><path d="M115.0156,18.875 Q115.1719,18.6563 115.3594,18.5469 Q115.5469,18.4375 115.7656,18.4375 Q116.1406,18.4375 116.375,18.7031 Q116.6094,18.9531 116.6094,19.5625 L116.6094,21.0156 Q116.6094,21.625 116.375,21.8906 Q116.1406,22.1563 115.7656,22.1563 Q115.4219,22.1563 115.2188,21.9531 Q115.0156,21.7656 114.9063,21.25 Q114.8594,20.8906 114.6719,20.7031 Q114.3438,20.3281 113.7344,20.1094 Q113.125,19.8906 112.5,19.8906 Q111.7344,19.8906 111.0938,20.2188 Q110.4688,20.5469 109.9688,21.2969 Q109.4844,22.0469 109.4844,23.0781 L109.4844,24.1719 Q109.4844,25.4063 110.375,26.2344 Q111.2656,27.0469 112.8594,27.0469 Q113.7969,27.0469 114.4531,26.7969 Q114.8438,26.6406 115.2656,26.2031 Q115.5313,25.9375 115.6719,25.8594 Q115.8281,25.7813 116.0313,25.7813 Q116.3594,25.7813 116.6094,26.0469 Q116.875,26.2969 116.875,26.6406 Q116.875,26.9844 116.5313,27.3906 Q116.0313,27.9688 115.2344,28.2969 Q114.1563,28.75 112.8594,28.75 Q111.3438,28.75 110.1406,28.125 Q109.1563,27.625 108.4688,26.5625 Q107.7813,25.4844 107.7813,24.2031 L107.7813,23.0469 Q107.7813,21.7188 108.3906,20.5781 Q109.0156,19.4219 110.1094,18.8125 Q111.2031,18.1875 112.4375,18.1875 Q113.1719,18.1875 113.8125,18.3594 Q114.4688,18.5156 115.0156,18.875 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="132.75" y="28.7285">InventoryPane</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="316" y1="39" y2="39"></line><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="50.3047"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="27" y="57.5332">InventoryController controller</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="316" y1="64.6094" y2="64.6094"></line><ellipse cx="18" cy="78.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="284" x="27" y="83.1426">InventoryPane(InventoryController controller)</text><ellipse cx="18" cy="96.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="184" x="27" y="100.752">void onItemClicked(Item item)</text></g><!--SRC=[Iyv9B2vMyCmhIyqhoI-g34ZCIrMevb800bs4g7D-NabHVavEQf52Cfm9LgIDgbK3lnPDg9wo_CmKXVmypvBKNEUSpEJir1GD45iX4qXeSjK20000]--></g></svg></p><p>Notez, que le contrôleur est passé en paramètre du constructeur. Ce, grâce à l’injection de dépendance, vous pourrez donc facilement changer le contrôleur si vous en avez besoin.</p>
<h3 id="etape-12–affichage-dans-la-console-du-choix-dun-objet">Etape 12 : Affichage dans la console du choix d’un objet </h3>
<p>Finalement, nous aimerions que lorsqu’un objet est sélectionné, le nom de l’objet soit affiché dans la console.<br>
Pour cela, dans votre contrôleur, vous pouvez ajouter au constructeur un paramètre de type <code>MessageService</code>. Stockez le dans un attribut de votre classe.</p>
<p>Dans votre méthode <code>onItemClicked</code>, vous pouvez appeler la méthode <code>addMessage</code> de votre service pour ajouter le nom de l’objet à la liste des messages.</p>
<p><strong>Vous devriez être convaincu que cette manière de faire est plus modulaire et plus facile à maintenir.</strong><br>
Si nous n’avions pas utilisé l’injection de dépendance, nous aurions dû modifier la classe principale pour qu’elle passe en paramètre le <code>MessageService</code> à l’écran pour que celui ci le passe au contrôleur. Ici, nous n’avons eu qu’à ajouter un paramètre au constructeur du contrôleur.</p>
<h3 id="etape-13–application-du-patron-de-conception-stratégie">Etape 13 : Application du patron de conception “Stratégie” </h3>
<p>Dernièrement, vous avez crée des classes ExperienceGenerator, LootGenerator qui implémentaient les interfaces IExperienceGenerator et ILootGenerator. Ces classes étaient utilisées dans la classe <code>Combat</code> pour générer de l’expérience et des objets lorsqu’un combat était gagné.</p>
<p>Vous savez maintenant comment ajouter des messages dans la console, vous pouvez donc en profiter pour ajouter un peu de lore à votre jeu.</p>
<p>Dupliquez votre ExperienceGenerator et appelez le ExperienceGeneratorII. Modifiez le rapidement pour que l’expérience générée soit différente.</p>
<p>Documentez vous afin d’utiliser SpringBoot et le DP Stratégie, par exemple à l’aide de <a href="https://thegeekyasian.com/strategy-pattern-spring-boot/">Ce lien</a> mais ce ne sera peut-ête pas suffisant.</p>
<p>On souhaite ajouter un menu à notre application pour choisir le générateur d’expérience à utiliser. Pour cela, vous pouvez créer une nouvelle classe qui hérite de JPanel et qui possède l’annotation <code>@IGameMainMenu("Configuration")</code>. Vous pouvez ajouter un menu déroulant pour choisir le générateur d’expérience à utiliser.<br>
Ce sera en quelque sorte une jauge de difficulté pour votre jeu.</p>
<h3 id="etape-14–place-à-lexploration">Etape 14 : Place à l’exploration </h3>
<p>Actuellement votre carte permet de se déplacer, mais vous ne pouvez pas interagir avec les éléments de la carte.<br>
En plus, le déplacement n’utilise pas de contrôleur, ce qui n’est pas très modulaire.</p>
<p>Nous allons d’abord améliorer notre affichage de carte, actuellement, il se base sur des caractères pour savoir quoi afficher<br>
Le générateur renvoie des lettres mais il n’est pas normal de devoir les manipuler pour savoir quoi afficher.</p>
<p>Créez une enum <code>WorldMapTile</code> :</p>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-enum">enum</span> <span class="token class-name">WorldMapTile</span> <span class="token punctuation">{</span>
    <span class="token function">LAND</span><span class="token punctuation">(</span><span class="token char">'G'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">WATER</span><span class="token punctuation">(</span><span class="token char">'A'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">HILL</span><span class="token punctuation">(</span><span class="token char">'M'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">DESERT</span><span class="token punctuation">(</span><span class="token char">'J'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">BEACH</span><span class="token punctuation">(</span><span class="token char">'D'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">MOUNTAIN</span><span class="token punctuation">(</span><span class="token char">'P'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-final">final</span> <span class="token keyword keyword-char">char</span> symbol<span class="token punctuation">;</span>

    <span class="token class-name">WorldMapTile</span><span class="token punctuation">(</span><span class="token keyword keyword-char">char</span> symbol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>symbol <span class="token operator">=</span> symbol<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token class-name">WorldMapTile</span> <span class="token function">fromChar</span><span class="token punctuation">(</span><span class="token keyword keyword-char">char</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token class-name">WorldMapTile</span> tile <span class="token operator">:</span> <span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>tile<span class="token punctuation">.</span>symbol <span class="token operator">==</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword keyword-return">return</span> tile<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-throw">throw</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"Unknown tile symbol: "</span> <span class="token operator">+</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-char">char</span> <span class="token function">getSymbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span> symbol<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><p>Créez également une classe <code>CoordStruct</code> :</p>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">CoordStruct</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-boolean">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token keyword keyword-this">this</span> <span class="token operator">==</span> o<span class="token punctuation">)</span> <span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword keyword-null">null</span> <span class="token operator">||</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> o<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token class-name">CoordStruct</span> that <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">CoordStruct</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span>
        <span class="token keyword keyword-return">return</span> x <span class="token operator">==</span> that<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> y <span class="token operator">==</span> that<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-int">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">hash</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-final">final</span> <span class="token keyword keyword-int">int</span> x<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-final">final</span> <span class="token keyword keyword-int">int</span> y<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">CoordStruct</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> x<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><p>Enfin, ajouter ce fichier à votre projet</p>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code><span class="token keyword keyword-package">package</span> <span class="token namespace">tp<span class="token punctuation">.</span>services<span class="token punctuation">.</span>mapProvider<span class="token punctuation">.</span>poi</span><span class="token punctuation">;</span>

<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>common<span class="token punctuation">.</span>base<span class="token punctuation">.</span></span><span class="token class-name">Supplier</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Qualifier</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Primary</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Scope</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">tp<span class="token punctuation">.</span></span><span class="token class-name">CoordStruct</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">tp<span class="token punctuation">.</span></span><span class="token class-name">PersonnageSingleton</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">tp<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">Item</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">tp<span class="token punctuation">.</span>services<span class="token punctuation">.</span></span><span class="token class-name">CombatGenerator</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">tp<span class="token punctuation">.</span>services<span class="token punctuation">.</span></span><span class="token class-name">ExperienceGenerator</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">tp<span class="token punctuation">.</span>services<span class="token punctuation">.</span></span><span class="token class-name">LootGenerator</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">tp<span class="token punctuation">.</span>services<span class="token punctuation">.</span>mapProvider<span class="token punctuation">.</span></span><span class="token class-name">IWorldMapProvider</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">tp<span class="token punctuation">.</span>services<span class="token punctuation">.</span>mapProvider<span class="token punctuation">.</span></span><span class="token class-name">WorldMapTile</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">tp<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">MessageService</span></span><span class="token punctuation">;</span>

<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Optional</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Random</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Collectors</span></span><span class="token punctuation">;</span>


<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-abstract">abstract</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">POI</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-final">final</span> <span class="token class-name">CoordStruct</span> position<span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token function">POI</span><span class="token punctuation">(</span><span class="token class-name">CoordStruct</span> position<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>position <span class="token operator">=</span> position<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token class-name">CoordStruct</span> <span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span> position<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword keyword-protected">protected</span> <span class="token class-name">LootGenerator</span> lootGenerator<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword keyword-protected">protected</span> <span class="token class-name">PersonnageSingleton</span> personnageSingleton<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword keyword-protected">protected</span> <span class="token class-name">MessageService</span> messageService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword keyword-protected">protected</span> <span class="token class-name">CombatGenerator</span> combatGenerator<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword keyword-protected">protected</span> <span class="token class-name">ExperienceGenerator</span> experienceGenerator<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">interact</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Component</span>
    <span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"prototype"</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">MonsterPOI</span> <span class="token keyword keyword-extends">extends</span> <span class="token class-name">POI</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">interact</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-super">super</span><span class="token punctuation">.</span><span class="token function">interact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            messageService<span class="token punctuation">.</span><span class="token function">addMessage</span><span class="token punctuation">(</span><span class="token string">"Vous avez rencontré un monstre"</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span><span class="token punctuation">;</span>
            combatGenerator<span class="token punctuation">.</span><span class="token function">combat</span><span class="token punctuation">(</span><span class="token keyword keyword-this">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token keyword keyword-public">public</span> <span class="token class-name">MonsterPOI</span><span class="token punctuation">(</span><span class="token class-name">CoordStruct</span> position<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-super">super</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Component</span>

    <span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"prototype"</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">DungeonPOI</span> <span class="token keyword keyword-extends">extends</span> <span class="token class-name">POI</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-public">public</span> <span class="token class-name">DungeonPOI</span><span class="token punctuation">(</span><span class="token class-name">CoordStruct</span> coordStruct<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-super">super</span><span class="token punctuation">(</span>coordStruct<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">interact</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-super">super</span><span class="token punctuation">.</span><span class="token function">interact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            messageService<span class="token punctuation">.</span><span class="token function">addMessage</span><span class="token punctuation">(</span><span class="token string">"Vous avez rencontré un donjon"</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-var">var</span> i <span class="token operator">:</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span>i<span class="token operator">%</span><span class="token number">2</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token class-name">Item</span> newItem <span class="token operator">=</span> lootGenerator<span class="token punctuation">.</span><span class="token function">genererLoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    personnageSingleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ajouterALInventaire</span><span class="token punctuation">(</span>newItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    messageService<span class="token punctuation">.</span><span class="token function">addMessage</span><span class="token punctuation">(</span><span class="token string">"Nouveau loot -&gt; "</span> <span class="token operator">+</span> newItem<span class="token punctuation">.</span><span class="token function">getNom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>blue<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword keyword-else">else</span> <span class="token punctuation">{</span>
                    messageService<span class="token punctuation">.</span><span class="token function">addMessage</span><span class="token punctuation">(</span><span class="token string">"Vous avez rencontré un monstre"</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>combatGenerator<span class="token punctuation">.</span><span class="token function">combat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword keyword-break">break</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>



    <span class="token annotation punctuation">@Component</span>

    <span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"prototype"</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">TreasurePOI</span> <span class="token keyword keyword-extends">extends</span> <span class="token class-name">POI</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">interact</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-super">super</span><span class="token punctuation">.</span><span class="token function">interact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            messageService<span class="token punctuation">.</span><span class="token function">addMessage</span><span class="token punctuation">(</span><span class="token string">"Vous avez trouvé un trésor"</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>green<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Item</span> newItem <span class="token operator">=</span> lootGenerator<span class="token punctuation">.</span><span class="token function">genererLoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            personnageSingleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ajouterALInventaire</span><span class="token punctuation">(</span>newItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
            messageService<span class="token punctuation">.</span><span class="token function">addMessage</span><span class="token punctuation">(</span><span class="token string">"Nouveau loot -&gt; "</span> <span class="token operator">+</span> newItem<span class="token punctuation">.</span><span class="token function">getNom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>blue<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

        <span class="token keyword keyword-public">public</span> <span class="token class-name">TreasurePOI</span><span class="token punctuation">(</span><span class="token class-name">CoordStruct</span> coordStruct<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-super">super</span><span class="token punctuation">(</span>coordStruct<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-enum">enum</span> <span class="token class-name">POITypes</span> <span class="token punctuation">{</span>

        <span class="token class-name">Monster</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">MonsterPOI</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Treasure</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">TreasurePOI</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Dungeon</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">DungeonPOI</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">;</span>

        <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-final">final</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword keyword-extends">extends</span> POI<span class="token punctuation">&gt;</span></span> poiType<span class="token punctuation">;</span>

        <span class="token class-name">POITypes</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword keyword-extends">extends</span> POI<span class="token punctuation">&gt;</span></span> poiType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>poiType <span class="token operator">=</span> poiType<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Component</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">PoiSupplier</span> <span class="token keyword keyword-extends">extends</span> <span class="token class-name">RandomEnumGenerator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">POITypes</span><span class="token punctuation">&gt;</span></span> <span class="token keyword keyword-implements">implements</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">POITypes</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

        <span class="token keyword keyword-public">public</span> <span class="token class-name">PoiSupplier</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-super">super</span><span class="token punctuation">(</span><span class="token class-name">POITypes</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword keyword-public">public</span> <span class="token class-name">POITypes</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span><span class="token function">nextEnum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">PseudoNormalNumberGenerator</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-final">final</span> <span class="token class-name">Random</span> random<span class="token punctuation">;</span>
        <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-final">final</span> <span class="token keyword keyword-double">double</span> maxDeviation<span class="token punctuation">;</span>

        <span class="token keyword keyword-public">public</span> <span class="token class-name">PseudoNormalNumberGenerator</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> maxDeviation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>random <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>maxDeviation <span class="token operator">=</span> maxDeviation<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword keyword-protected">protected</span> <span class="token keyword keyword-int">int</span> <span class="token function">nextGaussianInRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-double">double</span> u1 <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> random<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-double">double</span> u2 <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> random<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-double">double</span> randStdNormal <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2.0</span> <span class="token operator">*</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>u1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">2.0</span> <span class="token operator">*</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> u2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-return">return</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>randStdNormal<span class="token punctuation">)</span><span class="token operator">*</span>maxDeviation<span class="token punctuation">)</span><span class="token operator">%</span>maxDeviation<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">PseudoNormalNumberGenerator</span> generator <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">PseudoNormalNumberGenerator</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Example with maximum deviation of 10</span>
            <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">15</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">nextGaussianInRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-abstract">abstract</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">RandomEnumGenerator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword keyword-extends">extends</span> <span class="token class-name">Enum</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span>  <span class="token keyword keyword-extends">extends</span> <span class="token class-name">PseudoNormalNumberGenerator</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-final">final</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> enumClass<span class="token punctuation">;</span>

        <span class="token keyword keyword-public">public</span> <span class="token class-name">T</span> <span class="token function">nextEnum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-return">return</span> enumClass<span class="token punctuation">.</span><span class="token function">getEnumConstants</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token keyword keyword-this">this</span><span class="token punctuation">.</span><span class="token function">nextGaussianInRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-public">public</span> <span class="token class-name">RandomEnumGenerator</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> enumClass<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-super">super</span><span class="token punctuation">(</span>enumClass<span class="token punctuation">.</span><span class="token function">getEnumConstants</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>enumClass <span class="token operator">=</span> enumClass<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Component</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">MapPOIGenerator</span> <span class="token punctuation">{</span>

        <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-final">final</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>POI<span class="token punctuation">&gt;</span></span> poies<span class="token punctuation">;</span>

        <span class="token keyword keyword-public">public</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>POI<span class="token punctuation">&gt;</span></span> <span class="token function">getPoies</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-return">return</span> poies<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword keyword-public">public</span> <span class="token class-name">MapPOIGenerator</span><span class="token punctuation">(</span><span class="token class-name">IWorldMapProvider</span> mapProvider<span class="token punctuation">,</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">POITypes</span><span class="token punctuation">&gt;</span></span> randomPoiGenerator<span class="token punctuation">,</span> <span class="token class-name">PoiFactory</span> poiFactroy<span class="token punctuation">)</span><span class="token punctuation">{</span>

            poies <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i <span class="token operator">=</span> mapProvider<span class="token punctuation">.</span><span class="token function">getMapMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> mapProvider<span class="token punctuation">.</span><span class="token function">getMapMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>mapProvider<span class="token punctuation">.</span><span class="token function">getMapMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token class-name">WorldMapTile</span><span class="token punctuation">.</span><span class="token constant">WATER</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword keyword-continue">continue</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token keyword keyword-new">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0.2f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword keyword-continue">continue</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>

                   poies<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>poiFactroy<span class="token punctuation">.</span><span class="token function">createPoi</span><span class="token punctuation">(</span>randomPoiGenerator<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>poiType<span class="token punctuation">,</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">CoordStruct</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>

        <span class="token keyword keyword-public">public</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span>POI<span class="token punctuation">&gt;</span></span> <span class="token function">popPoi</span><span class="token punctuation">(</span><span class="token class-name">CoordStruct</span> position<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span>POI<span class="token punctuation">&gt;</span></span> optionalPOI <span class="token operator">=</span> <span class="token function">getPoies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>e <span class="token operator">-&gt;</span> e<span class="token punctuation">.</span><span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            optionalPOI<span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span>poi <span class="token operator">-&gt;</span> <span class="token function">getPoies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>poi<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-return">return</span> optionalPOI<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Component</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">PoiFactory</span><span class="token punctuation">{</span>
        <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-final">final</span> <span class="token class-name">ApplicationContext</span> context<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword keyword-extends">extends</span> POI<span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">createPoi</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> poiType<span class="token punctuation">,</span> <span class="token class-name">CoordStruct</span> position<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token keyword keyword-return">return</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span> poiType<span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
        <span class="token keyword keyword-public">public</span> <span class="token class-name">PoiFactory</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><p>Ce code permet de créer des points d’intérêt sur la carte. Vous pouvez créer des monstres, des trésors, des donjons, etc. Ces points d’intérêt définissent une position sur la carte et une méthode <code>interact</code> qui est appelée lorsque le personnage interagit avec le point d’intérêt.</p>
<p>Il nous faut maintenant modifier notre contrôleur pour qu’il gère l’interaction avec les points d’intérêt.<br>
Aussi, il faudra modifier notre écran pour qu’il affiche les points d’intérêt sur la carte.</p>
<p>Votre contrôleur pourrait ressembler à ceci :</p>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code>    <span class="token keyword keyword-public">public</span> <span class="token class-name">WorldMapTile</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span> mapProviderMap<span class="token punctuation">.</span><span class="token function">getMapMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span>POI<span class="token punctuation">&gt;</span></span> <span class="token function">getPOI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span> mapPOIGenerator<span class="token punctuation">.</span><span class="token function">getPoies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">CoordStruct</span> <span class="token function">getPersonnagePosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span> personnageSingleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token class-name">Direction</span> direction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">CoordStruct</span> position <span class="token operator">=</span> personnageSingleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword keyword-int">int</span> x <span class="token operator">=</span> position<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
        <span class="token keyword keyword-int">int</span> y <span class="token operator">=</span> position<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>direction <span class="token operator">==</span> <span class="token class-name">Direction</span><span class="token punctuation">.</span><span class="token constant">NORD</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            y<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>direction <span class="token operator">==</span> <span class="token class-name">Direction</span><span class="token punctuation">.</span><span class="token constant">SUD</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            y<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>direction <span class="token operator">==</span> <span class="token class-name">Direction</span><span class="token punctuation">.</span><span class="token constant">EST</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            x<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>direction <span class="token operator">==</span> <span class="token class-name">Direction</span><span class="token punctuation">.</span><span class="token constant">OUEST</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            x<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>mapProviderMap<span class="token punctuation">.</span><span class="token function">getMapMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token class-name">WorldMapTile</span><span class="token punctuation">.</span><span class="token constant">WATER</span><span class="token punctuation">)</span>
            messageService<span class="token punctuation">.</span><span class="token function">addMessage</span><span class="token punctuation">(</span><span class="token string">"Votre personnage ne peut pas se déplacer sur l'eau."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-else">else</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>direction <span class="token operator">==</span> <span class="token class-name">Direction</span><span class="token punctuation">.</span><span class="token constant">NORD</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                personnageSingleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>direction <span class="token operator">==</span> <span class="token class-name">Direction</span><span class="token punctuation">.</span><span class="token constant">SUD</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                personnageSingleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>direction <span class="token operator">==</span> <span class="token class-name">Direction</span><span class="token punctuation">.</span><span class="token constant">EST</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                personnageSingleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>direction <span class="token operator">==</span> <span class="token class-name">Direction</span><span class="token punctuation">.</span><span class="token constant">OUEST</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                personnageSingleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            messageService<span class="token punctuation">.</span><span class="token function">addMessage</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            messageService<span class="token punctuation">.</span><span class="token function">addMessage</span><span class="token punctuation">(</span><span class="token string">"Le personnage se déplace vers le "</span> <span class="token operator">+</span> direction<span class="token punctuation">)</span><span class="token punctuation">;</span>
            explorationGenerator<span class="token punctuation">.</span><span class="token function">explorer</span><span class="token punctuation">(</span>personnageSingleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</code></pre><p>Et votre écran pourrait ressembler à ceci :</p>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code><span class="token keyword keyword-package">package</span> <span class="token namespace">tp<span class="token punctuation">.</span>view<span class="token punctuation">.</span>component<span class="token punctuation">.</span>map</span><span class="token punctuation">;</span>

<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">tp<span class="token punctuation">.</span></span><span class="token class-name">CoordStruct</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">tp<span class="token punctuation">.</span></span><span class="token class-name">Direction</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">tp<span class="token punctuation">.</span></span><span class="token class-name">MapController</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">tp<span class="token punctuation">.</span>services<span class="token punctuation">.</span>mapProvider<span class="token punctuation">.</span></span><span class="token class-name">WorldMapTile</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">tp<span class="token punctuation">.</span>services<span class="token punctuation">.</span>mapProvider<span class="token punctuation">.</span>poi<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>swing<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>event<span class="token punctuation">.</span></span><span class="token class-name">KeyEvent</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>event<span class="token punctuation">.</span></span><span class="token class-name">KeyListener</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">PixelMap</span> <span class="token keyword keyword-extends">extends</span> <span class="token class-name">JPanel</span> <span class="token keyword keyword-implements">implements</span> <span class="token class-name">KeyListener</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-final">final</span> <span class="token class-name">MapController</span> mapController<span class="token punctuation">;</span>


    <span class="token keyword keyword-public">public</span> <span class="token class-name">PixelMap</span><span class="token punctuation">(</span><span class="token class-name">MapController</span> mapController<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>mapController <span class="token operator">=</span> mapController<span class="token punctuation">;</span>
        <span class="token function">addKeyListener</span><span class="token punctuation">(</span><span class="token keyword keyword-this">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span><span class="token function">setPreferredSize</span><span class="token punctuation">(</span><span class="token keyword keyword-new">new</span> <span class="token class-name">Dimension</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword keyword-protected">protected</span> <span class="token keyword keyword-void">void</span> <span class="token function">paintComponent</span><span class="token punctuation">(</span><span class="token class-name">Graphics</span> g<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-super">super</span><span class="token punctuation">.</span><span class="token function">paintComponent</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Graphics2D</span> g1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Graphics2D</span><span class="token punctuation">)</span> g<span class="token punctuation">;</span>
        <span class="token class-name">WorldMapTile</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> map <span class="token operator">=</span> mapController<span class="token punctuation">.</span><span class="token function">getMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Draw the map</span>
        <span class="token keyword keyword-int">int</span> cellSize <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// Adjust cell size as needed</span>
        <span class="token keyword keyword-int">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-int">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> map<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> map<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                g1<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token function">getColorIndex</span><span class="token punctuation">(</span>map<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                g1<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>i <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span> j <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>


        <span class="token comment">// Draw player character</span>

        <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-var">var</span> poi <span class="token operator">:</span> mapController<span class="token punctuation">.</span><span class="token function">getPOI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>poi<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">POI<span class="token punctuation">.</span>MonsterPOI</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                g1<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">ORANGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>poi<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">POI<span class="token punctuation">.</span>TreasurePOI</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                g1<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">GREEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>poi<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">POI<span class="token punctuation">.</span>DungeonPOI</span><span class="token punctuation">.</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                g1<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">MAGENTA</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            g1<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>poi<span class="token punctuation">.</span><span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>x <span class="token operator">*</span> cellSize<span class="token punctuation">,</span> poi<span class="token punctuation">.</span><span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>y <span class="token operator">*</span> cellSize<span class="token punctuation">,</span> cellSize<span class="token punctuation">,</span> cellSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        g1<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">YELLOW</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Change color to represent player character</span>
        <span class="token class-name">CoordStruct</span> personnagePosition <span class="token operator">=</span> <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>mapController<span class="token punctuation">.</span><span class="token function">getPersonnagePosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        g1<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>personnagePosition<span class="token punctuation">.</span>x <span class="token operator">*</span> cellSize<span class="token punctuation">,</span> personnagePosition<span class="token punctuation">.</span>y <span class="token operator">*</span> cellSize<span class="token punctuation">,</span> cellSize<span class="token punctuation">,</span> cellSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-private">private</span> <span class="token class-name">Color</span> <span class="token function">getColorIndex</span><span class="token punctuation">(</span><span class="token class-name">WorldMapTile</span> worldMapTile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-switch">switch</span> <span class="token punctuation">(</span>worldMapTile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-case">case</span> <span class="token constant">WATER</span><span class="token operator">:</span> <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">170</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-case">case</span> <span class="token constant">BEACH</span><span class="token operator">:</span> <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">215</span><span class="token punctuation">,</span><span class="token number">235</span><span class="token punctuation">,</span><span class="token number">235</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-case">case</span> <span class="token constant">LAND</span><span class="token operator">:</span> <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">175</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-case">case</span> <span class="token constant">DESERT</span><span class="token operator">:</span> <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">225</span><span class="token punctuation">,</span><span class="token number">215</span><span class="token punctuation">,</span><span class="token number">145</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-case">case</span> <span class="token constant">HILL</span><span class="token operator">:</span> <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">125</span><span class="token punctuation">,</span><span class="token number">105</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-case">case</span> <span class="token constant">MOUNTAIN</span><span class="token operator">:</span> <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">86</span><span class="token punctuation">,</span><span class="token number">71</span><span class="token punctuation">,</span><span class="token number">61</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-default">default</span><span class="token operator">:</span> <span class="token keyword keyword-return">return</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>white<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">keyTyped</span><span class="token punctuation">(</span><span class="token class-name">KeyEvent</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">keyPressed</span><span class="token punctuation">(</span><span class="token class-name">KeyEvent</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// Call PersonnageController to move the player character</span>

        <span class="token keyword keyword-int">int</span> keyCode <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getKeyCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-switch">switch</span> <span class="token punctuation">(</span>keyCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-case">case</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">VK_UP</span><span class="token operator">:</span>
                mapController<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token class-name">Direction</span><span class="token punctuation">.</span><span class="token constant">NORD</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword keyword-break">break</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-case">case</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">VK_DOWN</span><span class="token operator">:</span>
                mapController<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token class-name">Direction</span><span class="token punctuation">.</span><span class="token constant">SUD</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword keyword-break">break</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-case">case</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">VK_LEFT</span><span class="token operator">:</span>
                mapController<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token class-name">Direction</span><span class="token punctuation">.</span><span class="token constant">OUEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword keyword-break">break</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-case">case</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span><span class="token constant">VK_RIGHT</span><span class="token operator">:</span>
                mapController<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token class-name">Direction</span><span class="token punctuation">.</span><span class="token constant">EST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword keyword-break">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">repaint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Redraw the panel after the player's position changes</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">keyReleased</span><span class="token punctuation">(</span><span class="token class-name">KeyEvent</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><p>Votre jeu ressemble maintenant à ceci :</p>
<p><img src="https://i.imgur.com/b5x5lzv.png" alt="Capture"></p>

      </div>
      <div class="md-sidebar-toc">
<div class="md-toc">
<div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#etape-10--rappatrier-votre-code-dans-le-projet" class="md-toc-link">
            <p>Etape 10 : Rappatrier votre code dans le projet</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#etape-11--crée-un-nouvel-écran-pour-afficher-linventaire" class="md-toc-link">
            <p>Etape 11 : Crée un nouvel écran pour afficher l’inventaire</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#etape-12--affichage-dans-la-console-du-choix-dun-objet" class="md-toc-link">
            <p>Etape 12 : Affichage dans la console du choix d’un objet</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#etape-13--application-du-patron-de-conception-stratégie" class="md-toc-link">
            <p>Etape 13 : Application du patron de conception “Stratégie”</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#etape-14--place-à-lexploration" class="md-toc-link">
            <p>Etape 14 : Place à l’exploration</p>

          </a></div>
</div>
</div>
      <a id="sidebar-toc-btn">≡</a>
    
    
    
    
    
    
<script>

var sidebarTOCBtn = document.getElementById('sidebar-toc-btn')
sidebarTOCBtn.addEventListener('click', function(event) {
  event.stopPropagation()
  if (document.body.hasAttribute('html-show-sidebar-toc')) {
    document.body.removeAttribute('html-show-sidebar-toc')
  } else {
    document.body.setAttribute('html-show-sidebar-toc', true)
  }
})
</script>
      
  
    </body></html>